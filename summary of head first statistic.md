# 深入浅出统计学 总结

## 图表

1. 图表能使数据直观地表现出来，显示趋势。
2. 图形中改变坐标尺度能够给人不同的印象。
3. 一个特定组中的对象数目称为频数。
4. 常用图形有饼图（表现比例）、垂直条形图、水平条形图、堆积条形图（多批数据）、分段条形图（多批数据）、直方图、折线图（表示趋势）、累积频数图等。
5. 数据分为类别数据（定性数据）和数值型数据（定量数据）。
6. 直方图的面积代表频数，纵坐标是频数密度。
7. 不要使用折线图显示类别数据，除非显示的是每一个类别的趋势，为每一个类别分别画折线。

## 描述数据集中趋势的亮度

1. 均值指的是所有的数据加起来除以数据个数，而平均数则分为许多种
    $$
    \mu = \frac{{\sum x}}{n}
    $$

2. 异常值指的是与其他数据格格不入的极高或极低的数值；当异常值将数据向左或向右拉时即产生偏斜数据。这时候可以使用中位数、众数。

## 分散性和变异性的亮度

1. 全距：极差。

2. 四分位数（用来剔除异常值）：最小的四分位数（Q1）称为下四分位数或第一四分位数；最大的四分位数（Q3）称为上四分位数或第三四分位数。四分位距 = 上四分位数 - 下四分位数。

3. 用箱线图绘制各种距。

4. 方差：数值和均值的距离的平方数的平均值。
    $$
    \sigma^2 = \frac{\sum{(x - \mu)^2}}{n}
    $$

5. 标准差是方差的平方根。

6. $$
    \sigma^2 = \frac{\sum{x}^2}{n} - \mu^2
    $$

7. 标准分：使用标准分可以对不同数据集的数据进行比较。通过标准分，我们可以将这些数值视为来自同一个数据集或数据分布。标准分 = 距离均值的标准差个数
    $$
    z = \frac{x - \mu}{\sigma}
    $$

## 概率计算

1. 概率：发生事件A的概率：
    $$
    P(A) = \frac{n(A)}{n(S)}
    $$
    `n(A)`：发生事件A的可能数目

    `n(S)`：所有可能结果的数目，S为概率空间或样本空间

2. 对立事件：不同时发生而且两者发生的概率之和等于1。
    $$
    P(A) + P(\overline A) = 1
    $$
    
3. 互斥事件：两件事情不可能同时发生。

    相交事件：两件事情可能同时发生。

    穷举事件：$P(A\cup B) = 1$

4. 交集：$P(A\cap B)$

    并集：$P(A\cup B)$ 或者 $P(AB)$

    概率的集合运算：
    $$
    P(A \cup B) = P(A) + P(B) - P(A \cap B)
    $$

5. 条件概率：
    $$
    P(A\mid B) = \frac{P(A \cap B)}{P(B)}
    $$
    因此也可以得到：
    $$
    P(A \cap B) = P(A \mid B) \times P(B)
    $$
    
6. 全概率公式：
    $$
    P(B) = P(A) \times P(B \mid A) + P(\overline A) \times P(B \mid \overline A)
    $$
    
7. 著名的贝叶斯定理：
    $$
    P(A \mid B) = \frac{P(A) \times P(B \mid A)}{P(A) \times P(B \mid A) + P(\overline A) \times P(B \mid \overline A)}
    $$
      可以用来计算逆条件概率。

8. 相关事件：$P(A \mid B) \neq P(A)$

9. 独立事件：$P(A \mid B) = P(A)$     $P(AB) = P(A) \times P(B)$

## 离散概率分布

1. 随机变量是表示试验各种结果的变量。

2. 数学期望：试验中出现的各种可能结果的概率乘以其结果的综合
    $$
    E(X) = \Sigma xP(X = x) \\
    E(X) = \mu
    $$

3. 方差：
    $$
    Var(X) = E(X - \mu)^2 \\
    E(X - \mu)^2 = \Sigma(x- \mu)^2 P(X = x)
    $$
    
4. 随机变量的线性变换：
    $$
    E(aX + b) = aE(X) + b \\
    Var(aX + b) = a^2 Var(X)
    $$
    
5. 独立同分布：每一个试验的结果称为一个观测值，例如两次试验的结果分别记为$X_1$和$X_2$，它们和$X$具有一样的期望、方差和概率分布，即使互不相干，结果不同。独立同分布的随机变量有以下性质：
    $$
    E(X_1 + X_2 + \cdots + X_n) = nE(X) \\
    Var(X_1 + X_2 + \cdots + X_n) = nVar(X)
    $$

6. 独立随机变量的性质：
    $$
    E(X + Y) = E(X) + E(Y) \\
    Var(X + Y) = Var(X) + Var(Y) \\
    E(X - Y) = E(X) - E(Y) \\
    Var(X - Y) = Var(X) + Var(Y) \\
    E(aX + bY) = aE(X) + bE(Y) \\
    Var(aX + bY) = a^2Var(X) + b^2Var(Y) \\
    E(aX - bY) = aE(X) - bE(Y) \\
    Var(aX - bY) = a^2Var(X) + b^2Var(Y)
    $$

## 排列组合

1. n个不同的对象进行排列，则有$n!$种排列方式；若是n个不同的对象围成圆形进行排列，则有$(n - 1)!$不同种排列方式。
2. 分组排列：对n个对象进行分组$n_1, n_2, \cdots n_n$，对这些分组进行排列，共有$\frac{n!}{n_1!n_2! \cdots n_n!}$种排列方式。
3. 排列指的是从一个较大（n个）对象群体中取出一定数目（r个）对象进行排序，并得出排序方式总数目。

4. 组合指的是从n个对象中选取r个对象的选取方式的数目，不必知道所选对象的确切顺序。

## 几何分布、二项分布和泊松分布

1. 几何分布：
    $$
    P(X = r) = q^{r-1}p
    $$
    p: 单次试验成功的概率

    r: 第r次才成功

    几何分布的条件：1. 进行一系列相互独立的试验；2. 每一个试验都既有成功的可能，也有失败的可能，且单次试验的成功概率相同；3. 主要该兴趣的是为了取得第一次成功需要进行多少次试验。

2. 为了取得第一次成功需要试验r次以上的概率：
    $$
    P(X > r) = q^r
    $$
    为了取得第一次成功需要试验r次或r次以下的概率：
    $$
    P(X <= r) = 1 - q^r
    $$
    
3. 如果一个变量X的概率符合几何分布，且单次试验的成功概率为p，则可以写作：
    $$
    X \sim Geo(p)
    $$

4. 几何分布的数学期望和方差：
    $$
    E(X) = \frac{1}{p} \\
    Var(X) = \frac{q}{p^2}
    $$
    
5. 二项分布：
    $$
    X \sim B(n, p) \\
    P(X = r) = C_n^rp^rq^{n-r} \\
    E(X) = np \\
    Var(X) = npq
    $$
    二项分布的条件：1. 进行一系列独立试验；2. 每一个试验都存在失败和成功的可能，每一次试验的成功概率相同；3. 试验次数有限；4. 求指定成功的次数的概率。

6. 泊松分布：
    $$
    X \sim P_o(\lambda) \\
    P(X = r) = \frac{e^{-\lambda}\lambda ^r}{r!} \\
    E(X) = \lambda \\
    Var(X) = \lambda
    $$
    泊松分布的条件：1. 单独事件在给定区间内随机、独立地发生，给定区间可以是时间或空间；2. 已知该区间内的事件平均发生次数（或者叫做发生率），且为有限数值。该事件平均发生次数通常用希腊字母$\lambda$表示。

7. 组合泊松变量：如果X和Y都符合泊松分布，则X+Y也符合泊松分布，即
    $$
    X \sim P_o(\lambda_x)且 Y \sim P_o(\lambda_y),则 \\
    X + Y \sim P_o(\lambda_x + \lambda_y)
    $$
    
8. 用泊松分布近似二项分布：当n很大(n>50)且p(p<0.1)很小时，可以用$X \sim P_o(np)$近似替代$X \sim B(n, p)$,  数学期望$\lambda$近似$np$, 方差$\lambda$近似$npq$.

## 正态分布

1. 用概率密度函数描述随机变量的概率分布，通过它可以求出一个数据范围内某个连续变量的概率。

2. 正态分布：如果一个连续随机变量$X$符合均值为$\mu$、标准差为$\sigma$的正态分布，则
    $$
    X \sim N(\mu, \sigma ^2) \\
    f(x) = \frac{1}{\sqrt{2\pi}\sigma}exp(-\frac{(x - \mu)^2}{2\sigma^2})
    $$
    
3. 求正态分布时，需要将随机变量$X$转换成标准分$Z$，$Z$符合标准正态分布：
    $$
    Z \sim N(0, 1) \\
    Z = \frac{X - \mu}{\sigma}
    $$
    
4. 正态分布近似代替二项分布：当$np$和$nq$均大于5时，$\mu = np, \sigma ^2 = npq$，但是要进行连续性修正。
5. 连续性修正：将离散数值转换成连续标度时，需要进行小幅度调整。例如：$P(X <= a)$时，需要修正到$P(X <= a + 0.5)$; $P(X >= b)$时，需要修正到$P(X >= b - 0.5)$。
6. 正态分布近似代替泊松分布：$\lambda > 15$ 时，$X \sim P_o(\lambda)$，可以用$X \sim N(\lambda, \lambda)$进行近似。

## 统计抽样

1. 总体：进行测量、研究或分析的整个群体

    普查：对总体进行研究或调查

    样本：从总体中选取的一部分对象

    样本调查：对总体的一个样本进行的研究或调查

2. 无偏样本：样本与总体样本具有相似特性

    偏倚样本：样本与总体的特性不相似

3. 抽样方式：简单随机抽样（重复抽样、不重复抽样）、分层抽样、整群抽样、系统抽样

## 总体和样本的估计

1. 点估计量：一个总体参数的点估计量是可用于估计总体参数数值的某个函数或算式。例如可以用样本均值估计总体均值，因此样本均值($\overline{x}$)就是总体均值($\mu$)的点估计量($\hat{\mu}$)
    $$
    \mu = \hat{\mu} \\
    \hat{\mu} = \overline{x}
    $$
    
2. 总体方差$\sigma ^2$：n是总体大小
    $$
    \sigma ^2 = \frac{\Sigma(x - \mu)^2}{n}
    $$
    估计总体方差（即方差的点估计量）：n是样本大小
    $$
    \hat{\sigma^2} = \frac{\Sigma(x-\overline{x})^2}{n-1}
    $$
    总体方差点估计量的算是通常写作$s^2$：
    $$
    \hat{\sigma ^2} = s^2 \\
    s^2 = \frac{\Sigma(x - \overline{x})^2}{n - 1}
    $$
    

3. $P$的点估计量是$P_s$，$P_s$为样本的成功比例：
    $$
    \hat P = P_s
    $$
    $P_s$的计算方式是：用样本中的成功数目除以样本数目。

4. 比例的抽样分布：比例本身是一个随机变量，$P_s = \frac{X}{n}$，如果$X \sim B(n, p)$，则：
    $$
    E(P_s) = p \\
    Var(P_s) = \frac{pq}{n}
    $$

5. 当n很大时(n>30)，$P_s$的分布接近正态分布，且n越大，越接近正态分布：
    $$
    P_s \sim N(p, \frac{pq}{n})
    $$
    需要对X进行连续性修正：
    $$
    X ± 1/2 \Longrightarrow \frac{±1}{2n}
    $$

6. 均值的抽样分布：

    样本均值：$\overline X = \frac{X_1 + X_2 + \cdots + X_n}{n}$

    $X_n$指的是样本中的每一个样本点，它们是独立同分布的随机变量。

    样本均值的数学期望：
    $$
    E(\overline X) = \mu
    $$
    

    样本均值的方差：
    $$
    Var(\overline X) = \frac{\sigma ^2}{n} 
    $$
    当n>30时，$\overline X$符合正态分布：
    $$
    \overline X \sim N(\mu, \sigma ^2 / n)
    $$

7. 中心极限定理：如果从一个非正态总体X中取出一个样本，且样本很大（样本大小），则$\overline X$的分布近似为正态分布。当X符合正态分布时，样本的大小无所谓。

## 置信区间

1. 求置信区间的流程：

    1.1 选择总体统计量 

    1.2 求所选统计量的抽样分布

    1.3 决定置信水平

    1.4 求出置信区间上下限

2. 置信水平：总体参数值落在样本统计值某一区内的概率。

3. 置信区间：在某一置信水平下，样本统计值与总体数值间的误差范围。置信区间越大，置信水平越高。

4. 一般情况下，置信区间的计算式为：统计量±（误差范围）。

    误差范围等于c与检验统计量的标准差的乘积：误差范围 = c × （统计量的标准差）

    | 总体统计量 |   总体分布   |                             条件                             |                           置信区间                           |
    | :--------: | :----------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
    |   $\mu$    |     正态     |    $\sigma ^2$ 已知，n可大可小，$\overline X$ 为样本均值     | $(\overline X - c \frac{\sigma}{\sqrt{n}}, \overline X + c \frac{\sigma}{\sqrt{n}} )$ |
    |   $\mu$    |    非正态    |       $\sigma ^2$ 已知，n>30，$\overline X$ 为样本均值       | $(\overline X - c \frac{\sigma}{\sqrt{n}}, \overline X + c \frac{\sigma}{\sqrt{n}} )$ |
    |   $\mu$    | 正态或非正态 | $\sigma ^ 2$ 未知，n>30，$\overline X$ 为样本均值，$s^2$  为样本方差 | $(\overline X - c \frac{s}{\sqrt{n}}, \overline X + c \frac{s}{\sqrt{n}} )$ |

    

4. 当样本很小时(n < 30)，$\overline X$符合 $t$ 分布：
    $$
    T \sim t(v) \\
    v = n -1 \ (\ degree \ of \ freedom)
    $$
    

5. $t$ 分布的标准分：
    $$
    T = \frac{\overline X - \mu}{s/\sqrt{n}}
    $$
    $s$ 为样本标准差，用来估计总体标准差$\sigma$ 

    $s / \sqrt{n}$ 是$\overline X$ 标准差

    置信区间：
    $$
    (\overline X - t\frac{s}{\sqrt{n}}, \overline X + t\frac{s}{\sqrt{n}})
    $$

## 假设检验

1. 假设检验的步骤：

    1.1 确定要进行检验的假设：原假设$H_o$ ，备择假设$H_1$ 

    1.2 选择检验统计量

    1.3 确定用于做决策的拒绝域

    1.4 求出检验统计量的p值

    1.5 查看样本结果是否位于拒绝域内

    1.6 做出决策

2. 进行假设检验时，假定原假设为真，如果有足够的证据反驳原假设，则拒绝原假设，接受备择假设。

3. 拒绝域的分界点称为$c$ ，即临界值。为了确定临界值，引入显著性水平$\alpha$ ，指的是原假设为真时，拒绝原假设的概率，即决策中面临的风险。

4. 单尾检验：如果备择假设包含< 符号，则使用左尾，此时拒绝域在数据的低端；包含>符号，则使用右尾，此时拒绝域在数据的高端

5. 双尾检验：备择假设包含$\neq$ 符号，则使用双尾检验。

6. $P$ 值：当原假设为真时所得到的样本观察结果或更极端结果出现的概率。

    如果$P$ 值小于显著性水平，则拒绝原假设，选择备择假设。

## $\chi ^2$ 分布

1. 这种分布通过一个检验统计量来比较期望结果和实际结果值间的差别，然后得出观察频数极值的发生概率：
    $$
    \chi ^2 = \sum \frac{(O - E)^2}{E}
    $$
    $O$ 代表观察频数，$E$ 代表期望频数。

2. 卡方分布的两个主要用途：检验拟合优度；检验两个变量的独立性
    $$
    \Chi ^2 \sim \chi ^ 2_\alpha(\nu)
    $$
    $\nu$ 为自由度数目，独立信息段的数目

    $\alpha$ 为显著性水平